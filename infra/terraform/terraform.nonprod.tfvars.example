project_name       = "ai-pr-reviewer"
environment        = "nonprod"
log_retention_days = 14

# AWS region (default: us-gov-west-1 for GovCloud)
# aws_region = "us-gov-west-1"

# Optional explicit allow-list. Empty list means allow all repos where app is installed.
github_allowed_repos = [
  # "my-org/my-repo"
]

# Bedrock config
bedrock_agent_id       = ""
bedrock_agent_alias_id = ""
bedrock_model_id       = "anthropic.claude-3-sonnet-20240229-v1:0"
bedrock_guardrail_id      = ""
bedrock_guardrail_version = ""
bedrock_guardrail_trace   = "DISABLED"

# Keep safe during first non-prod rollout.
dry_run = true

# Autonomous remediation PR mode (start disabled until review confidence is high)
auto_pr_enabled       = false
auto_pr_max_files     = 5
auto_pr_branch_prefix = "ai-autofix"
review_comment_mode   = "inline_best_effort"

# Jira/Confluence chatbot service
chatbot_enabled         = true
chatbot_model_id        = "anthropic.claude-3-sonnet-20240229-v1:0"
chatbot_guardrail_id    = ""
chatbot_guardrail_version = ""
chatbot_guardrail_trace = "disabled"
chatbot_retrieval_mode  = "hybrid"
chatbot_default_assistant_mode = "contextual"
chatbot_llm_provider    = "bedrock"
chatbot_allowed_model_ids = [
  "anthropic.claude-3-7-sonnet-20250219-v1:0",
  # "amazon.nova-lite-v1:0",
  # "amazon.nova-pro-v1:0",
]
chatbot_enable_anthropic_direct = false
chatbot_anthropic_api_key_secret_arn = ""
chatbot_anthropic_api_base = "https://api.anthropic.com"
chatbot_anthropic_model_id = "claude-sonnet-4-5"
chatbot_github_live_enabled = false
chatbot_github_live_repos = ["my-org/my-repo"]
chatbot_github_live_max_results = 3
chatbot_memory_enabled = true
chatbot_memory_max_turns = 6
chatbot_memory_ttl_days = 30
chatbot_memory_compaction_chars = 12000
chatbot_user_requests_per_minute = 120
chatbot_conversation_requests_per_minute = 60
chatbot_image_model_id = "amazon.nova-canvas-v1:0"
chatbot_image_default_size = "1024x1024"
chatbot_image_safety_enabled = true
chatbot_image_banned_terms = ["explicit sexual", "nudity", "child sexual", "self-harm", "graphic gore", "extreme violence", "dismemberment"]
chatbot_image_user_requests_per_minute = 30
chatbot_image_conversation_requests_per_minute = 10
chatbot_observability_enabled = true
chatbot_metrics_namespace = ""
chatbot_websocket_enabled = true
chatbot_websocket_stage = "prod"
chatbot_websocket_default_chunk_chars = 120
bedrock_knowledge_base_id = "<SET_KB_ID>"
bedrock_kb_top_k        = 5

# Scheduled Confluence -> Bedrock Knowledge Base sync
kb_sync_enabled            = true
bedrock_kb_data_source_id  = "<SET_KB_DATA_SOURCE_ID>"
kb_sync_schedule_expression = "rate(6 hours)"
kb_sync_s3_prefix          = "confluence"
confluence_sync_cql        = "type=page order by lastmodified desc"
confluence_sync_limit      = 25

# Scheduled GitHub docs -> Bedrock Knowledge Base sync
github_kb_sync_enabled              = false
github_kb_data_source_id            = ""
github_kb_sync_schedule_expression  = "rate(6 hours)"
github_kb_sync_s3_prefix            = "github"
github_kb_repos                     = ["my-org/my-repo"]
github_kb_include_patterns          = ["README.md", "docs/**", "**/*.md"]
github_kb_max_files_per_repo        = 200

# Teams adapter endpoint (enable only when testing Teams integration)
teams_adapter_enabled = false
teams_adapter_token   = ""

# Chatbot route login/auth mode:
# - token       => existing X-Api-Token / X-Teams-Adapter-Token checks inside Lambda
# - jwt         => API Gateway JWT authorizer (company SSO/OIDC)
# - github_oauth => API Gateway Lambda authorizer validates GitHub OAuth bearer token
chatbot_auth_mode         = "token"
chatbot_jwt_issuer        = ""
chatbot_jwt_audience      = []
github_oauth_allowed_orgs = []
# For GitHub OAuth defaults in EC2 web UI, set these when using chatbot_auth_mode="github_oauth"
# chatbot_auth_mode                    = "github_oauth"
# github_oauth_allowed_orgs            = ["my-org"]
# webapp_default_auth_mode             = "bearer"
# webapp_default_github_oauth_base_url = "https://github.my-company.mil"
# webapp_default_github_client_id      = "Iv1.0123456789abcdef"
# webapp_default_github_scope          = "read:user read:org"

# Optional S3-hosted static chatbot web UI
webapp_hosting_enabled = false
webapp_hosting_mode    = "s3"
webapp_bucket_name     = ""

# Optional fixed-IP static chatbot web UI (ec2_eip mode)
# webapp_hosting_mode         = "ec2_eip"
# webapp_private_only         = true
# webapp_ec2_subnet_id        = "subnet-xxxxxxxx"
# webapp_ec2_instance_type    = "t3.micro"
# webapp_ec2_allowed_cidrs    = ["203.0.113.10/32"]
# webapp_ec2_key_name         = "my-keypair"
# webapp_ec2_ami_id           = "" # optional override
# webapp_tls_enabled          = true
# webapp_tls_acm_certificate_arn = "arn:aws-us-gov:acm:us-gov-west-1:123456789012:certificate/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
# webapp_tls_subnet_ids       = ["subnet-aaaaaaa", "subnet-bbbbbbb"]
# webapp_default_chatbot_url  = "https://<api-id>.execute-api.us-gov-west-1.amazonaws.com/chatbot/query"
